<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Vietpro Chat application</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./access/style.css">
</head>

<body>
    <div class="container py-5 px-4">
        <!-- For demo purpose-->
        <header class="text-center">
            <h1 class="display-4 text-white">Vietpro Chat application</h1>
        </header>

        <div class="row rounded-lg overflow-hidden shadow">
            <!-- Users box-->
            <div class="col-5 px-0">
                <div class="bg-white">

                    <div class="bg-gray px-4 py-2 bg-light">
                        <p class="h5 mb-0 py-1">Xin chào: <span id="name">Nguyen Van A</span></p>
                    </div>

                    <div class="messages-box">
                        <div id="list-rooms" class="list-group rounded-0">

                            <a id="giao-luu" class="list-group-item list-group-item-action rounded-0 active" data-id="giao-luu">
                                <div class="media">
                                    <div class="media-body ml-4">
                                        <div class="d-flex align-items-center justify-content-between mb-1">
                                            <h6 class="mb-0">Room: Giao Lưu</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a id="ket-ban-bon-phuong" class="list-group-item list-group-item-action rounded-0" data-id="ket-ban-bon-phuong">
                                <div class="media">
                                    <div class="media-body ml-4">
                                        <div class="d-flex align-items-center justify-content-between mb-1">
                                            <h6 class="mb-0">Room: Kết bạn bốn phương</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                            <a id="zlFgvbic1EYmxfQwAAAB" class="list-group-item list-group-item-action rounded-0" data-id="zlFgvbic1EYmxfQwAAAB">
                                <div class="media">
                                    <div class="media-body ml-4">
                                        <div class="d-flex align-items-center justify-content-between mb-1">
                                            <h6 class="mb-0">Client: Nguyen Van B</h6>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Chat Box-->
            <div class="col-7 px-0">
                <div id="chat-box" class="px-4 py-5 chat-box bg-white">
                    <div class="media w-50 mb-3 ml-auto">
                        <div class="media-body ml-3">

                            <div class="bg-primary rounded py-2 px-3 mb-2">
                                <p class="text-small mb-0 text-white">Hello</p>
                            </div>
                        </div>
                    </div>
                    <div class="media w-50 mb-3 ">
                        <div class="media-body ml-3">
                            <b class="client" data-id="zlFgvbic1EYmxfQwAAAB" data-name="Nguyen Van B">Nguyen Van B</b>
                            <div class="bg-light rounded py-2 px-3 mb-2">
                                <p class="text-small mb-0 text-muted">Hi</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Typing area -->
                <div lass="bg-light">
                    <div class="input-group">
                        <input type="text" placeholder="Type a message" id="input-message" aria-describedby="button-addon2" class="form-control rounded-0 border-0 py-4 bg-light">
                        <div class="input-group-append">
                            <button id="button-addon2" type="submit" class="btn btn-link"> <i class="fa fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script type="text/javascript">
    	var map=getCharsMap();  
/* 
 * Chuyển hình ảnh thành text 
 
 */  
function toChars(context, width, height, rowChars) {  
    var pixels = [],  
        output = "",  
        imageData = context.getImageData(0, 0, width, height),  
        rowChars = width < rowChars ? width : rowChars,  
        char_h = width / rowChars,  
        char_w = char_h,  
        rows = height / char_h,  
        cols = rowChars,  
     
        getBlockGray = function (x, y, w, h) {  
            var sumGray = 0, pixels;  
            for (var row = 0; row < w; row++) {  
                for (var col = 0; col < h; col++) {  
                    var cx = x + col,   
                        cy = y + row,   
                        index = (cy * imageData.width + cx) * 4,  
                        data = imageData.data,  
                        R = data[index],  
                        G = data[index + 1],  
                        B = data[index + 2],  
                        gray = ~~(R * 0.3 + G * 0.59 + B * 0.11);  
                    sumGray += gray;  
                }  
            }  
            pixels = w * h;  
            return ~~(sumGray / pixels);  
        };  
    for (var r = 0; r < rows; r++) {  
        for (var c = 0; c < cols; c++) {  
            var pos_x = ~~(c * char_h),  
                pos_y = ~~(r * char_h),  
                avg = getBlockGray(pos_x, pos_y, ~~char_w, ~~char_h),  
                ch = map[avg];  
            output += ch;  
        }  
        output += '\r\n';  
    }  
    ;  
    return output;  
}  
function getCharsMap() {  
    var chars = ['@', 'w', '#', '$', 'k', 'd', 't', 'j', 'i', '.', ' '];  
    var step = 25,  
        map = {};  
    for (var i = 0; i < 256; i++) {  
        var index = ~~(i / 25)  
        map[i] = chars[index];  
    }  
    ;  
    return map;  
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>